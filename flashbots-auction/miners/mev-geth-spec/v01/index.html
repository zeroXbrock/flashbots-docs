<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Flashbots Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Flashbots Docs Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Flashbots Docs" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">v0.1 | Flashbots Docs</title><meta data-react-helmet="true" property="og:url" content="https://docs.flashbots.net/flashbots-auction/miners/mev-geth-spec/v01"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="v0.1 | Flashbots Docs"><meta data-react-helmet="true" name="description" content="Simple Summary"><meta data-react-helmet="true" property="og:description" content="Simple Summary"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.flashbots.net/flashbots-auction/miners/mev-geth-spec/v01"><link data-react-helmet="true" rel="alternate" href="https://docs.flashbots.net/flashbots-auction/miners/mev-geth-spec/v01" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.flashbots.net/flashbots-auction/miners/mev-geth-spec/v01" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.3ebe4b5e.css">
<link rel="preload" href="/assets/js/styles.1d552b49.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.f434e0d5.js" as="script">
<link rel="preload" href="/assets/js/main.7ab347b4.js" as="script">
<link rel="preload" href="/assets/js/1.d097c1ed.js" as="script">
<link rel="preload" href="/assets/js/2.00d5afc0.js" as="script">
<link rel="preload" href="/assets/js/52.a51bd220.js" as="script">
<link rel="preload" href="/assets/js/55.36a6c9f5.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.2316d150.js" as="script">
<link rel="preload" href="/assets/js/17896441.2b33ceb9.js" as="script">
<link rel="preload" href="/assets/js/19b5a061.29c5ac44.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Flashbots Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Flashbots Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Flashbots Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/flashbots/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Flashbots Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Flashbots Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Flashbots Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/flashbots/docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">welcome to flashbots</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">flashbots auction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/overview">overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/upgrade-process">upgrade process</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">for searchers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/quick-start">quick start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/faq">FAQ</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">advanced concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/advanced/understanding-bundles">understanding bundles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/advanced/coinbase-payment">coinbase.transfer()</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/advanced/bundle-pricing">bundle pricing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/advanced/rpc-endpoint">RPC endpoint</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/advanced/reputation">searcher reputation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/advanced/goerli-testnet">goerli testnet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/advanced/eip1559">eip-1559 support</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">example searchers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/example-searchers/simple-arbitrage-bot">simple arbitrage bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/example-searchers/searcher-sponsored-tx">searcher sponsored tx</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">libraries</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/libraries/ethers-js-provider">ethers.js provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/searchers/libraries/web3py-provider">web3.py provider</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/other-resources">other resources</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">for miners &amp; mining pools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/quick-start">onboarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/how-it-works">how it works?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/discord-setup">discord setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">advanced concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/advanced/source-code">source code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/advanced/interacting-with-relay">interacting with relay</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">mev-geth spec</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/mev-geth-spec/v03">v0.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/mev-geth-spec/v03-rpc">v0.3 RPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/mev-geth-spec/v02">v0.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/mev-geth-spec/v02-rpc">v0.2 RPC</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/flashbots-auction/miners/mev-geth-spec/v01">v0.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/flashbots-auction/miners/mev-geth-spec/v01-rpc">v0.1 RPC</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">releases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/releases/v0.3">v0.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-auction/releases/alpha-v0.2">alpha-v0.2</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">flashbots data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-data/blockapi">mev-blocks API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-data/mev-explore">mev-explore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-data/dashboard">flashbots dashboard</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">mev-inspect</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-data/mev-inspect-rs/inspect-quick-start">quick start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-data/mev-inspect-rs/inspect-codebase-design">codebase - design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-data/mev-inspect-rs/inspect-codebase-deep-dive">codebase - deep dive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flashbots-data/mev-inspect-rs/inspect-inspector-example">sample flow - liquidation tx</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/community-tools">community tools</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">contribute</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contribution-guide">docs contribution guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cheatsheet">cheatsheet</a></li></ul></li><li class="menu__list-item"><a href="https://discord.gg/7hvTycdNcK" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN">Discord</a></li><li class="menu__list-item"><a href="https://github.com/flashbots/docs" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN">GitHub</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">v0.1</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="simple-summary"></a>Simple Summary<a class="hash-link" href="#simple-summary" title="Direct link to heading">#</a></h2><p>Defines the construction and usage of MEV bundles by the miners. Provides specification for custom implementation of required node changes so that MEV bundles can be used correctly.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="abstract"></a>Abstract<a class="hash-link" href="#abstract" title="Direct link to heading">#</a></h2><p><code>MevBundles</code> are stored by the node and the best bundle is added to the block in front of other transactions. <code>MevBundles</code> are sorted by their <code>adjusted gas price</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="motivation"></a>Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">#</a></h2><p>We believe that without the adoption of neutral, public, open-source infrastructure for permissionless MEV extraction, MEV risks becoming an insiders&#x27; game. We commit as an organisation to releasing reference implementations for participation in fair, ethical, and politically neutral MEV extraction.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="specification"></a>Specification<a class="hash-link" href="#specification" title="Direct link to heading">#</a></h2><p>The key words <code>MUST</code>, <code>MUST NOT</code>, <code>REQUIRED</code>, <code>SHALL</code>, <code>SHALL NOT</code>, <code>SHOULD</code>, <code>SHOULD NOT</code>, <code>RECOMMENDED</code>,  <code>MAY</code>, and <code>OPTIONAL</code> in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt" target="_blank" rel="noopener noreferrer">RFC-2119</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="definitions"></a>Definitions<a class="hash-link" href="#definitions" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bundle"></a><code>Bundle</code><a class="hash-link" href="#bundle" title="Direct link to heading">#</a></h4><p>A set of transactions that <code>MUST</code> be executed together and <code>MUST</code> be executed at the beginning of the block.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unit-of-work"></a><code>Unit of work</code><a class="hash-link" href="#unit-of-work" title="Direct link to heading">#</a></h4><p>A <code>transaction</code>, a <code>bundle</code> or a <code>block</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="subunit"></a><code>Subunit</code><a class="hash-link" href="#subunit" title="Direct link to heading">#</a></h4><p>A discernible <code>unit of work</code> that is a part of a bigger <code>unit of work</code>. A <code>transaction</code> is a <code>subunit</code> of a <code>bundle</code> or a <code>block</code>. A <code>bundle</code> is a <code>subunit</code> of a <code>block</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="total-gas-used"></a><code>Total gas used</code><a class="hash-link" href="#total-gas-used" title="Direct link to heading">#</a></h4><p>A sum of gas units used by each transaction from the <code>unit of work</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="average-gas-price"></a><code>Average gas price</code><a class="hash-link" href="#average-gas-price" title="Direct link to heading">#</a></h4><p>Sum of (<code>gas price</code> * <code>total gas used</code>) of all <code>subunits</code> divided by the <code>total gas used</code> of the unit.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="direct-coinbase-payment"></a><code>Direct coinbase payment</code><a class="hash-link" href="#direct-coinbase-payment" title="Direct link to heading">#</a></h4><p>A value of a transaction with a recipient set to be the same as the <code>coinbase</code> address.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="contract-coinbase-payment"></a><code>Contract coinbase payment</code><a class="hash-link" href="#contract-coinbase-payment" title="Direct link to heading">#</a></h4><p>A payment from a smart contract to the <code>coinbase</code> address.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="profit"></a><code>Profit</code><a class="hash-link" href="#profit" title="Direct link to heading">#</a></h4><p>A difference between the balance of the <code>coinbase</code> account at the end and at the beginning of the execution of a <code>unit of work</code>. We can measure a <code>transaction profit</code>, a <code>bundle profit</code>, and a <code>block profit</code>.</p><p>Balance of the <code>coinbase</code> account changes in the following way</p><table><thead><tr><th>Unit of work</th><th>Balance Change</th></tr></thead><tbody><tr><td>Transaction</td><td><code>average gas price</code> * <code>total gas used</code> + <code>direct coinbase payment</code>  + <code>contract coinbase payment</code></td></tr><tr><td>Bundle</td><td><code>average gas price</code> * <code>total gas used</code> + <code>direct coinbase payment</code>  + <code>contract coinbase payment</code></td></tr><tr><td>Block</td><td><code>block reward</code> + <code>average gas price</code> * <code>total gas used</code> + <code>direct coinbase payment</code>  + <code>contract coinbase payment</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="adjusted-gas-price"></a><code>Adjusted gas price</code><a class="hash-link" href="#adjusted-gas-price" title="Direct link to heading">#</a></h4><p><code>Unit of work</code> <code>profit</code> divided by the <code>total gas used</code> by the <code>unit of work</code>.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>s</mi><mrow><mi>v</mi><mn>0.1</mn></mrow></msub><mo>=</mo><mfrac><mrow><msub><mi mathvariant="normal">Î”</mi><mrow><mi>c</mi><mi>o</mi><mi>i</mi><mi>n</mi><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow></msub><mo>+</mo><munder><mo>âˆ‘</mo><mrow><mi>T</mi><mo>âˆˆ</mo><mi>U</mi></mrow></munder><msub><mi>g</mi><mi>T</mi></msub><msub><mi>p</mi><mi>T</mi></msub></mrow><mrow><munder><mo>âˆ‘</mo><mrow><mi>T</mi><mo>âˆˆ</mo><mi>U</mi></mrow></munder><msub><mi>g</mi><mi>T</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">s_{v0.1} = \frac{\Delta_{coinbase} + \sum_{T\in U}g_Tp_T}{\sum_{T\in U}g_T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span><span class="mord mtight">0</span><span class="mord mtight">.</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.48016em;vertical-align:-1.01308em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4670800000000002em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.17862099999999992em"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span><span class="mrel mtight">âˆˆ</span><span class="mord mathnormal mtight" style="margin-right:0.10903em">U</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.32708000000000004em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.71708em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">Î”</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.17862099999999992em"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span><span class="mrel mtight">âˆˆ</span><span class="mord mathnormal mtight" style="margin-right:0.10903em">U</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.32708000000000004em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.01308em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">s</span></span></span></span></span>: adjusted gas price used to sort bundles.<br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.10903em">U</span></span></span></span></span>: ordered list of transactions <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">g_{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>: <em>gas used</em> by transaction <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>.<br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">p_{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>: <em>gas price</em> of transaction <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>.<br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î”</mi><mrow><mi>c</mi><mi>o</mi><mi>i</mi><mi>n</mi><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\Delta_{coinbase}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord">Î”</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>: coinbase difference from direct payment.  </p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mevbundle"></a><code>MevBundle</code><a class="hash-link" href="#mevbundle" title="Direct link to heading">#</a></h4><p>An object with four properties:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>transactions</code></td><td><code>Array&lt;RLP(SignedTransaction)&gt;</code></td><td>A list of transactions in the bundle. Each transaction is signed and RLP-encoded.</td></tr><tr><td><code>blockNumber</code></td><td><code>uint64</code></td><td>The exact block number at which the bundle can be executed</td></tr><tr><td><code>minTimestamp</code></td><td><code>uint64</code></td><td>Minimum block timestamp (inclusive) at which the bundle can be executed</td></tr><tr><td><code>maxTimestamp</code></td><td><code>uint64</code></td><td>Maximum block timestamp (inclusive) at which the bundle can be executed</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bundle-construction"></a>Bundle construction<a class="hash-link" href="#bundle-construction" title="Direct link to heading">#</a></h3><p>Bundle <code>SHOULD</code> contain transactions with nonces that are following the current nonces of the signing addresses or other transactions preceding them in the same bundle.</p><p>A bundle <code>MUST</code> contain at least one transaction. There is no upper limit for the number of transactions in the bundle, however bundles that exceed the block gas limit will always be rejected. </p><p>A bundle <code>MAY</code> include a <code>direct coinbase payment</code> or a <code>contract coinbase payment</code>. Bundles that do not contain such payments may lose comparison when their <code>profit</code> is compared with other bundles.</p><p>The <code>maxTimestamp</code> value <code>MUST</code> be greater or equal the <code>minTimestamp</code> value.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="accepting-bundles-from-the-network"></a>Accepting bundles from the network<a class="hash-link" href="#accepting-bundles-from-the-network" title="Direct link to heading">#</a></h3><p>Node <code>MUST</code> provide a way of exposing a JSON RPC endpoint accepting <code>eth_sendBundle</code> calls (specified <a href="/flashbots-auction/miners/mev-geth-spec/v01-rpc">here</a>). Such endpoint <code>SHOULD</code> only be accepting calls from <code>MEV-relay</code> but there is no requirement to restrict it through the node source code as it can be done on the infrastructure level.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bundle-eligibility"></a>Bundle eligibility<a class="hash-link" href="#bundle-eligibility" title="Direct link to heading">#</a></h3><p>Any bundle that is correctly constructed <code>MUST</code> have a <code>blockNumber</code> field set which specifies in which block it can be included. If the node has already progressed to a later block number then such bundle <code>MAY</code> be removed from memory.</p><p>Any bundle that is correctly constructed <code>MAY</code> have a <code>minTimestamp</code> and/or a <code>maxTimestamp</code> field set. Default values for both of these fields are <code>0</code> and the meaning of <code>0</code> is that any block timestamp value is accepted. When these values are not <code>0</code>, then <code>block.timestamp</code> is compared with them. If the current <code>block.timestamp</code> is greater than the <code>maxTimestamp</code> then the bundle <code>MUST NOT</code> be included in the block and <code>MAY</code> be removed from memory. If the <code>block.timestamp</code> is less than <code>minTimestamp</code> then the bundle <code>MUST NOT</code> be included in the block and <code>SHOULD NOT</code> be removed from memory (it awaits future blocks).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="block-construction"></a>Block construction<a class="hash-link" href="#block-construction" title="Direct link to heading">#</a></h3><p>A block <code>MUST</code> either contain one bundle or no bundles. When a bundle is included it <code>MUST</code> be the bundle with the highest <code>adjusted gas price</code> among eligible bundles. The node <code>SHOULD</code> be able to compare a <code>block profit</code> in cases when a bundle is included (MEV block) and when no bundles are included (regular block) and choose a block with the highest <code>profit</code>.</p><p>A block with a bundle <code>MUST</code> place the bundle at the beginning of the block and <code>MUST NOT</code> insert any transactions between the bundle transactions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bundle-eviction"></a>Bundle eviction<a class="hash-link" href="#bundle-eviction" title="Direct link to heading">#</a></h3><p>Node <code>SHOULD</code> be able to limit the number of bundles kept in memory and apply an algorithm for selecting bundles to be evicted when too many eligible bundles have been received.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rationale"></a>Rationale<a class="hash-link" href="#rationale" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="at-most-one-mevbundle-gets-included-in-the-block"></a>At most one MevBundle gets included in the block<a class="hash-link" href="#at-most-one-mevbundle-gets-included-in-the-block" title="Direct link to heading">#</a></h3><p>There are two reasons for which multiple bundles in a block may cause problems:</p><ul><li>two bundles may affect each other&#x27;s <code>profit</code> and so the bundle creator may not be willing to accept a possibility of not being added in the front of the block</li><li>simulating multiple bundle combinations may be very straining for the node infrastructure and introduce excessive latency into the block creation process</li></ul><p>Both of these problems may be addressed in the future versions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="each-bundle-needs-a-blocknumber"></a>Each bundle needs a blockNumber<a class="hash-link" href="#each-bundle-needs-a-blocknumber" title="Direct link to heading">#</a></h2><p>This allows specifying bundles to be included in the future blocks (e.g. just after some smart contracts change their state). This cannot be used to ensure a specific parent block / hash.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="backwards-compatibility"></a>Backwards Compatibility<a class="hash-link" href="#backwards-compatibility" title="Direct link to heading">#</a></h2><p>This change is not affecting consensus and is fully backwards compatible.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="security-considerations"></a>Security Considerations<a class="hash-link" href="#security-considerations" title="Direct link to heading">#</a></h2><p><code>MevBundles</code> that are awaiting future blocks must be stored by the miner&#x27;s node and it is important to ensure that there is a mechanism to ensure that the storage is limits are not exceeded (whether they are store in memory or persisted).</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/flashbots-auction/miners/mev-geth-spec/v02-rpc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« v0.2 RPC</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/flashbots-auction/miners/mev-geth-spec/v01-rpc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">v0.1 RPC Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#simple-summary" class="table-of-contents__link">Simple Summary</a></li><li><a href="#abstract" class="table-of-contents__link">Abstract</a></li><li><a href="#motivation" class="table-of-contents__link">Motivation</a></li><li><a href="#specification" class="table-of-contents__link">Specification</a><ul><li><a href="#definitions" class="table-of-contents__link">Definitions</a></li><li><a href="#bundle-construction" class="table-of-contents__link">Bundle construction</a></li><li><a href="#accepting-bundles-from-the-network" class="table-of-contents__link">Accepting bundles from the network</a></li><li><a href="#bundle-eligibility" class="table-of-contents__link">Bundle eligibility</a></li><li><a href="#block-construction" class="table-of-contents__link">Block construction</a></li><li><a href="#bundle-eviction" class="table-of-contents__link">Bundle eviction</a></li></ul></li><li><a href="#rationale" class="table-of-contents__link">Rationale</a><ul><li><a href="#at-most-one-mevbundle-gets-included-in-the-block" class="table-of-contents__link">At most one MevBundle gets included in the block</a></li></ul></li><li><a href="#each-bundle-needs-a-blocknumber" class="table-of-contents__link">Each bundle needs a blockNumber</a></li><li><a href="#backwards-compatibility" class="table-of-contents__link">Backwards Compatibility</a></li><li><a href="#security-considerations" class="table-of-contents__link">Security Considerations</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/styles.1d552b49.js"></script>
<script src="/assets/js/runtime~main.f434e0d5.js"></script>
<script src="/assets/js/main.7ab347b4.js"></script>
<script src="/assets/js/1.d097c1ed.js"></script>
<script src="/assets/js/2.00d5afc0.js"></script>
<script src="/assets/js/52.a51bd220.js"></script>
<script src="/assets/js/55.36a6c9f5.js"></script>
<script src="/assets/js/935f2afb.2316d150.js"></script>
<script src="/assets/js/17896441.2b33ceb9.js"></script>
<script src="/assets/js/19b5a061.29c5ac44.js"></script>
</body>
</html>